!function(e){function t(t){for(var r,s,o=t[0],h=t[1],c=t[2],l=0,u=[];l<o.length;l++)s=o[l],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&u.push(a[s][0]),a[s]=0;for(r in h)Object.prototype.hasOwnProperty.call(h,r)&&(e[r]=h[r]);for(d&&d(t);u.length;)u.shift()();return n.push.apply(n,c||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],r=!0,o=1;o<i.length;o++){var h=i[o];0!==a[h]&&(r=!1)}r&&(n.splice(t--,1),e=s(s.s=i[0]))}return e}var r={},a={6:0},n=[];function s(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=r,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(i,r,function(t){return e[t]}.bind(null,r));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window.webpackJsonp=window.webpackJsonp||[],h=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=h;n.push([78,0]),i()}({78:function(e,t,i){"use strict";i.r(t);var r=i(1),a=i(17),n={width:100,height:100,halfWidth:50,halfHeight:50,cameraZ:500,dpr:1,aspectRatio:1};function s(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.clock=new r.Clock,this.container=document.getElementById("CanvasContainer"),this.particleIndexArray=[],this.setConfig(),this.renderer=new r.WebGLRenderer({alpha:!0,antialias:!0}),this.renderer.setSize(n.width,n.height),this.renderer.setPixelRatio(n.dpr),this.container.appendChild(this.renderer.domElement),this.resizeFunction=this.resize.bind(this),this.updateFunction=this.update.bind(this),window.addEventListener("resize",this.resizeFunction),this.scene=new r.Scene,this.camera=new r.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.set(0,0,1e3),this.z=Math.min(window.innerWidth,window.innerHeight),this.camera.lookAt(0,0,this.z),this.controls=new a.a(this.camera,this.renderer.domElement),this.init()}var t,i,o;return t=e,(i=[{key:"setConfig",value:function(){var e=this.container.getBoundingClientRect(),t=e.width,i=e.height;n.dpr=Math.min(window.devicePixelRatio,2),n.width=t,n.height=i,n.halfWidth=n.width/2,n.halfHeight=n.height/2,n.aspectRatio=n.width/n.height}},{key:"resizeScene",value:function(){this.renderer.setSize(n.width,n.height)}},{key:"init",value:function(){this.navigatorMediaDevices=navigator.mediaDevices||(navigator.mozGetUserMedia||navigator.webkitGetUserMedia?{getUserMedia:function(e){return new Promise((function(t,i){(navigator.mozGetUserMedia||navigator.webkitGetUserMedia).call(navigator,e,t,i)}))}}:null),this.navigatorMediaDevices&&this.initVideo(),this.start()}},{key:"initVideo",value:function(){var e=this;this.video=document.getElementById("video"),this.video.autoplay=!0,navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((function(t){e.video.srcObject=t,e.video.addEventListener("loadeddata",(function(){e.videoWidth=e.video.videoWidth,e.videoHeight=e.video.videoHeight,e.createParticles()}))})).catch((function(e){console.log(e)}))}},{key:"createParticles",value:function(){var e=this.getImageData(this.video);this.geometry=new r.BufferGeometry,this.geometry.morphAttributes={},this.material=new r.PointsMaterial({size:1,color:16726892,sizeAttenuation:!1});for(var t=[],i=0,a=e.height;i<a;i++)for(var n=0,s=e.width;n<s;n++){var o=4*(n+i*s);this.particleIndexArray.push(o),e.data[o],e.data[o+1],e.data[o+2],t.push(n-e.width/2,-i+e.height/2,0)}console.log(t);var h=new Float32Array(t);this.geometry.setAttribute("position",new r.BufferAttribute(h,3)),this.particles=new r.Points(this.geometry,this.material),this.scene.add(this.particles)}},{key:"getImageData",value:function(e,t){if(t&&this.imageCache)return this.imageCache;var i=e.videoWidth,r=e.videoHeight;return this.canvas.width=i,this.canvas.height=r,this.ctx.translate(i,0),this.ctx.scale(-1,1),this.ctx.drawImage(e,0,0),this.imageCache=this.ctx.getImageData(0,0,i,r),this.imageCache}},{key:"start",value:function(){this.checkFirst=!0,this.resize(),this.update()}},{key:"resize",value:function(){this.setConfig(),this.resizeScene()}},{key:"update",value:function(){if(this.clock.getDelta(),this.t=50*this.clock.elapsedTime,this.particles){this.particles.material.color.r=1,this.particles.material.color.g=1,this.particles.material.color.b=1;var e=parseInt(this.t)%2==0,t=this.getImageData(this.video,e),i=0,r=this.particles.geometry.attributes.position.array.length,a=Math.floor(this.t)*t.width*3%r;if(this.checkFirst){for(var n=0,s=r;n<s;n+=3)if(n+0!==0){var o=this.particleIndexArray[i],h=(t.data[o]+t.data[o+1]+t.data[o+2])/3;this.particles.geometry.attributes.position.array[n+2]=h<400?1*h:1e4,i++}else this.particles.geometry.attributes.position.array[n+2]=1e4;this.particles.geometry.attributes.position.needsUpdate=!0,this.checkFirst=!1,i=0}for(var c=a,d=r;c<d;c+=3){var l=this.particleIndexArray[c/3];if(c+0!==0){var u=(t.data[l]+t.data[l+1]+t.data[l+2])/3;this.particles.geometry.attributes.position.array[c+2]=u<300?u:1e4,i++}else this.particles.geometry.attributes.position.array[c+2]=1e4}this.particles.geometry.attributes.position.needsUpdate=!0}requestAnimationFrame(this.updateFunction),this.renderer.render(this.scene,this.camera)}}])&&s(t.prototype,i),o&&s(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}())}});